---
title: "Publication Overview / Publikations체bersicht"
author: "Your Name / Ihr Name"
date: "`r Sys.Date()`"
output: pdf_document
---

# Publication Summary (English)
Below is the code and explanation for summarizing and visualizing publication data in English.

```{r setup-en, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(dplyr)
library(forcats)
library(ggpubr)
```

```{r read-data-en}
# Read the publication data from CSV.
dat <- read.csv("../data/Example_Publications.csv", header = TRUE, sep = ",", stringsAsFactors = FALSE)

# Filter publications from 2021 onwards
df <- dat %>% filter(publication_year >= 2021)

# Ensure 'authorship_type' is an ordered categorical variable
df <- df %>% mutate(
  authorship_type = fct_relevel(
    authorship_type,
    "first-authorship",
    "co-authorship",
    "second-authorship"
  )
)
```

```{r plot-en}
# Create x-axis labels for all available years
x_axis_labels <- seq(min(df$publication_year, na.rm = TRUE), max(df$publication_year, na.rm = TRUE))

# Modern, accessible color palette
modern_palette <- c("#1B9E77", "#D95F02", "#7570B3") # teal, orange, purple

# Build the bar plot for publication summary
plot_en <- ggplot(df, aes(x = publication_year, fill = authorship_type)) +
  geom_bar(position = "stack", width = 0.4) +
  theme_pubclean() +
  labs(
    subtitle = paste("Publications", min(df$publication_year), "-", max(df$publication_year)),
    x = "",
    y = "Number"
  ) +
  scale_fill_manual(values = modern_palette) +
  theme(
    text = element_text(size = 12),
    legend.title = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = 12)
  ) +
  scale_x_continuous(labels = x_axis_labels, breaks = x_axis_labels) +
  guides(fill = guide_legend(title = NULL))

plot_en
```

---

# Publikations체bersicht (Deutsch)
Hier ist der gleiche Code und die Erkl채rung, aber auf Deutsch.

```{r setup-de, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(dplyr)
library(forcats)
library(ggpubr)
```

```{r read-data-de}
dat <- read.csv("../data/Example_Publications.csv", header = TRUE, sep = ",", stringsAsFactors = FALSE)

df <- dat %>% filter(publication_year >= 2021)

df <- df %>% mutate(
  authorship_type = fct_relevel(
    authorship_type,
    "first-authorship",
    "co-authorship",
    "second-authorship"
  )
)
```

```{r plot-de}
x_axis_labels <- seq(min(df$publication_year, na.rm = TRUE), max(df$publication_year, na.rm = TRUE))

farben_modern <- c("#1B9E77", "#D95F02", "#7570B3") # modernes, zug채ngliches Farbschema

plot_de <- ggplot(df, aes(x = publication_year, fill = authorship_type)) +
  geom_bar(position = "stack", width = 0.4) +
  theme_pubclean() +
  labs(
    subtitle = paste("Publikationen", min(df$publication_year), "-", max(df$publication_year)),
    x = "",
    y = "Anzahl"
  ) +
  scale_fill_manual(values = farben_modern) +
  theme(
    text = element_text(size = 12),
    legend.title = element_blank(),
    axis.text.x = element_text(angle = 45, hjust = 1, size = 12)
  ) +
  scale_x_continuous(labels = x_axis_labels, breaks = x_axis_labels) +
  guides(fill = guide_legend(title = NULL))

plot_de
```

---

<!--
Tips for beginners:
- Always check and update the file path to your CSV file before running the script.
- Install any missing packages in your R console: install.packages("ggplot2"); etc.
- Use RStudio for best experience with RMarkdown files.
- You can knit the file to PDF or HTML to see your results.
-->